#!/usr/bin/env python3
"""
Convert log.md → index.html using template.html
Requires: pip install markdown
"""

import markdown, pathlib, datetime, re

ROOT = pathlib.Path(__file__).parent
md_file      = ROOT / "blog.md"
template_file= ROOT / "template.html"
output_file  = ROOT / "index.html"

# 1) read & convert markdown
with md_file.open("r", encoding="utf-8") as f:
    md_text = f.read()

html_content = markdown.markdown(
    md_text, extensions=["fenced_code", "codehilite", "tables"]
)

# 2) inject into template
template = template_file.read_text(encoding="utf-8")
page = template.replace("{{content}}", html_content)

# 3) write out
output_file.write_text(page, encoding="utf-8")
print(f"Built {output_file.relative_to(ROOT)} ({len(page):,} bytes)")
